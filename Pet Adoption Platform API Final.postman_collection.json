{
  "info": {
    "_postman_id": "833883f5-35bb-44be-a03c-0502a1888c08",
    "name": "Pet Adoption Platform API Final",
    "description": "API collection for testing the Pet Adoption Platform with security",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "13581088"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register Staff",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Staff\",\n    \"lastName\": \"Kevin\",\n    \"phoneNumber\": \"30130120\",\n    \"username\": \"staffuser\",\n    \"email\": \"staff@test.com\",\n    \"password\": \"password123\",\n    \"role\": \"STAFF\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login Staff",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"staffToken\", jsonData.accessToken);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"staff@test.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Bob\",\n    \"lastName\": \"Doe\",\n    \"phoneNumber\": \"302320120\",\n    \"username\": \"testuser\",\n    \"email\": \"user@test.com\",\n    \"password\": \"password123\",\n    \"role\": \"USER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"userToken\", jsonData.accessToken);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@test.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register User 2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Doe\",\n    \"phoneNumber\": \"35550120\",\n    \"username\": \"testuser2\",\n    \"email\": \"user2@test.com\",\n    \"password\": \"password123\",\n    \"role\": \"USER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login User 2",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"userToken2\", jsonData.accessToken);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user2@test.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Pets - User Role",
      "item": [
        {
          "name": "Get All Available Pets (USER)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/pets/available?size=30",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "available"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "30"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Available Pets (USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"user_search_pet_id\", jsonData.content[0].id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"species\": \"DOG\",\n    \"minAge\": 1,\n    \"maxAge\": 20,\n    \"petSize\": \"SMALL\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets/search?size=15&sort=age,asc&sort=createdAt,asc",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "search"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "15"
                },
                {
                  "key": "sort",
                  "value": "age,asc"
                },
                {
                  "key": "sort",
                  "value": "createdAt,asc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Pets - All Available (USER)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"status\": \"AVAILABLE\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/pets/search",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "pets",
                "search"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Pets - Multiple Filters (USER)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"species\": \"CAT\",\r\n    \"petSize\": \"MEDIUM\",\r\n    \"minAge\":6,\r\n    \"maxAge\": 36\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/pets/search?sort=age,asc",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "pets",
                "search"
              ],
              "query": [
                {
                  "key": "sort",
                  "value": "age,asc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Pets - Dogs Near Location Without Sort (USER)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"species\": \"DOG\",\r\n    \"location\": {\r\n        \"lat\": 37.7749,\r\n        \"lon\": -122.4194\r\n    },\r\n    \"distance\": 100\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/pets/search",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "pets",
                "search"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Pets - Dogs Near Location With Sort (USER)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"species\": \"DOG\",\r\n    \"location\": {\r\n        \"lat\": 37.7749,\r\n        \"lon\": -122.4194\r\n    },\r\n    \"distance\": 100\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "http://localhost:8080/api/pets/search?sort=age,asc&sort=distance,desc",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "8080",
              "path": [
                "api",
                "pets",
                "search"
              ],
              "query": [
                {
                  "key": "sort",
                  "value": "age,asc"
                },
                {
                  "key": "sort",
                  "value": "closest",
                  "disabled": true
                },
                {
                  "key": "sort",
                  "value": "distance,desc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Available Pet By ID (USER)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/pets/{{user_search_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "{{user_search_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Pet (USER - Should Fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 403 Forbidden\", function () {\r",
                  "    pm.response.to.have.status(403);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Buddy\",\n  \"description\": \"A friendly dog looking for a home.\",\n  \"species\": \"DOG\",\n  \"age\": 3,\n  \"petSize\": \"MEDIUM\",\n  \"status\": \"AVAILABLE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Pets - Staff Role",
      "item": [
        {
          "name": "Get All Pets (AGENT)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "30",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Pet",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"staff_created_pet_id\", jsonData.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Buddy\",\n  \"description\": \"Buddy is a friendly and playful medium-sized dog who loves outdoor activities and meeting new people. He's well-behaved, house-trained, and gets along great with other pets.\",\n  \"species\": \"DOG\",\n  \"age\": 3,\n  \"petSize\": \"MEDIUM\",\n  \"status\": \"AVAILABLE\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zipCode\": \"62701\"\n  },\n  \"location\": {\n    \"lat\": 39.7817,\n    \"lon\": -89.6501\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Pet To Delete",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"staff_created_pet_id_to_be_deleted\", jsonData.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ToBeDeleted\",\n  \"description\": \"ToBeDeleted is a friendly and playful medium-sized dog who loves outdoor activities and meeting new people. He's well-behaved, house-trained, and gets along great with other pets.\",\n  \"species\": \"DOG\",\n  \"age\": 3,\n  \"petSize\": \"MEDIUM\",\n  \"status\": \"AVAILABLE\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zipCode\": \"62701\"\n  },\n  \"location\": {\n    \"lat\": 39.7817,\n    \"lon\": -89.6501\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Photos",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json()\r",
                  "pm.environment.set(\"photo_to_be_deleted\", jsonData[0].id);\r",
                  "pm.environment.set(\"num_of_uploaded_photos\", jsonData.length)\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "[\n    {\n        \"url\": \"https://images.unsplash.com/photo-1543466835-00a7907e9de1\"\n    },\n    {\n        \"url\": \"https://images.unsplash.com/photo-1543466835-00a7907e9de1\"\n    }\n]"
            },
            "url": {
              "raw": "{{baseUrl}}/api/photos/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "photos",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Photo",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/photos/{{photo_to_be_deleted}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "photos",
                "{{photo_to_be_deleted}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Uploaded Photos For Pet",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "\r",
                  "pm.test(\"Photos for pet have size 1\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "    pm.expect(jsonData.length).to.be.eql(pm.environment.get('num_of_uploaded_photos') - 1);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/api/photos/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "photos",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Pet",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Buddy Updated\",\n  \"age\": 4,\n  \"description\": \"Buddy is a friendly and playful dog who has recently completed advanced training. He's great with families and loves outdoor adventures.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Pet Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"status\": \"ON_HOLD\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets/{{staff_created_pet_id}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "{{staff_created_pet_id}}",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add Medical Record",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"medical_record_id\", jsonData.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"VACCINATION\",\n  \"description\": \"Rabies vaccination\",\n  \"appointmentDate\": \"2025-01-10T10:00:00\",\n  \"veterinarian\": \"Dr. Smith\",\n  \"notes\": \"Annual vaccination completed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add Medical Record (USER - should fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 403 Forbidden\", function () {\r",
                  "    pm.response.to.have.status(403);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"VACCINATION\",\n  \"description\": \"Rabies vaccination\",\n  \"appointmentDate\": \"2025-01-10T10:00:00\",\n  \"veterinarian\": \"Dr. Smith\",\n  \"notes\": \"Annual vaccination completed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add Medical Record (UNATHENTICATED- should fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401 Unauthorized\", function () {\r",
                  "    pm.response.to.have.status(401);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}",
                "disabled": true
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"VACCINATION\",\n  \"description\": \"Rabies vaccination\",\n  \"appointmentDate\": \"2025-01-10T10:00:00\",\n  \"veterinarian\": \"Dr. Smith\",\n  \"notes\": \"Annual vaccination completed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Medical Record",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"notes\": \"Updated notes\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{medical_record_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{medical_record_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Medical Records",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Medical Records (USER - should fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 403 Forbidden\", function () {\r",
                  "    pm.response.to.have.status(403);\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/medical-records/{{staff_created_pet_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "medical-records",
                "{{staff_created_pet_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Pet",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/pets/{{staff_created_pet_id_to_be_deleted}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "{{staff_created_pet_id_to_be_deleted}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check if Pet is Deleted",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "let deletedId = pm.environment.get(\"staff_created_pet_id_to_be_deleted\");\r",
                  "\r",
                  "pm.test(\"Pet is not found in the list\", function () {\r",
                  "    let deletedPet = jsonData.content.find(pet => pet.id === deletedId);\r",
                  "\r",
                  "    pm.expect(deletedPet).to.be.undefined;\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Adoption Applications",
      "item": [
        {
          "name": "Create Pet (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.collectionVariables.set(\"staff_created_pet_id\", jsonData.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Buddy\",\n  \"description\": \"Buddy is a friendly and playful medium-sized dog who loves outdoor activities and meeting new people. He's well-behaved, house-trained, and gets along great with other pets.\",\n  \"species\": \"DOG\",\n  \"age\": 3,\n  \"petSize\": \"MEDIUM\",\n  \"status\": \"AVAILABLE\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zipCode\": \"62701\"\n  },\n  \"location\": {\n    \"lat\": 39.7817,\n    \"lon\": -89.6501\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Pet For An Application (USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"bob_application_pet_id\", jsonData.content[0].id);\r",
                  "pm.environment.set(\"jane_application_pet_id\", jsonData.content[0].id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \r\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/pets/search?size=15&sort=age,asc&sort=createdAt,asc",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "pets",
                "search"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "15"
                },
                {
                  "key": "sort",
                  "value": "age,asc"
                },
                {
                  "key": "sort",
                  "value": "createdAt,asc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Draft Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has application ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.environment.set(\"bob_draft_application_id\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Application status is DRAFT\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('DRAFT');",
                  "});",
                  "",
                  "pm.test(\"Response contains all required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('petId');",
                  "    pm.expect(jsonData).to.have.property('applicantId');",
                  "    pm.expect(jsonData).to.have.property('firstName');",
                  "    pm.expect(jsonData).to.have.property('lastName');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "    pm.expect(jsonData).to.have.property('address');",
                  "    pm.expect(jsonData).to.have.property('livingSituation');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"petId\": \"{{bob_application_pet_id}}\",\n  \"alternatePhone\": \"+0987654321\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zipCode\": \"62701\"\n  },\n  \"livingSituation\": {\n    \"residenceType\": \"HOUSE\",\n    \"ownOrRent\": true,\n    \"hasYard\": true,\n    \"yardSize\": \"LARGE\",\n    \"isYardFenced\": true,\n    \"numberOfAdults\": 2,\n    \"numberOfChildren\": 1,\n    \"childrenAges\": \"8\",\n    \"hasOtherPets\": false,\n    \"activityLevel\": \"MODERATE\",\n    \"hoursAlonePerDay\": 4\n  },\n  \"adoptionReason\": \"Looking for a family companion\",\n  \"petExperience\": \"Had dogs for 10 years\",\n  \"veterinarianName\": \"Dr. Smith\",\n  \"veterinarianContact\": \"vet@clinic.com\",\n  \"references\": \"Jane Doe - neighbor\",\n  \"additionalComments\": \"i am applying for this pet.\",\n  \"isDraft\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Draft Application (Jane - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has application ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.environment.set(\"jane_draft_application_id\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Application status is DRAFT\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('DRAFT');",
                  "});",
                  "",
                  "pm.test(\"Response contains all required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('petId');",
                  "    pm.expect(jsonData).to.have.property('applicantId');",
                  "    pm.expect(jsonData).to.have.property('firstName');",
                  "    pm.expect(jsonData).to.have.property('lastName');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "    pm.expect(jsonData).to.have.property('address');",
                  "    pm.expect(jsonData).to.have.property('livingSituation');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken2}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"petId\": \"{{jane_application_pet_id}}\",\n  \"alternatePhone\": \"+0987654321\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"Springfield\",\n    \"state\": \"IL\",\n    \"zipCode\": \"62701\"\n  },\n  \"livingSituation\": {\n    \"residenceType\": \"HOUSE\",\n    \"ownOrRent\": true,\n    \"hasYard\": true,\n    \"yardSize\": \"LARGE\",\n    \"isYardFenced\": true,\n    \"numberOfAdults\": 2,\n    \"numberOfChildren\": 1,\n    \"childrenAges\": \"8\",\n    \"hasOtherPets\": false,\n    \"activityLevel\": \"MODERATE\",\n    \"hoursAlonePerDay\": 4\n  },\n  \"adoptionReason\": \"Looking for a family companion\",\n  \"petExperience\": \"Had dogs for 10 years\",\n  \"veterinarianName\": \"Dr. Smith\",\n  \"veterinarianContact\": \"vet@clinic.com\",\n  \"references\": \"Jane Doe - neighbor\",\n  \"additionalComments\": \"i am applying for this pet.\",\n  \"isDraft\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Draft Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.firstName).to.eql('Bob');",
                  "    pm.expect(jsonData.status).to.eql('DRAFT');",
                  "});",
                  "",
                  "pm.test(\"Updated timestamp changed\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('updatedAt');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alternatePhone\": \"0130123013\",\n  \"additionalComments\": \"Updated comments - very interested in this pet!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_draft_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_draft_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Submit Draft Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status is SUBMITTED\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('SUBMITTED');",
                  "    pm.collectionVariables.set(\"bob_submitted_application_id\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Submitted timestamp is set\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.submittedAt).to.not.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_draft_application_id}}/submit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_draft_application_id}}",
                "submit"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Submit Draft Application (Jane - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status is SUBMITTED\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('SUBMITTED');",
                  "    pm.collectionVariables.set(\"jane_submitted_application_id\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Submitted timestamp is set\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.submittedAt).to.not.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken2}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_draft_application_id}}/submit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_draft_application_id}}",
                "submit"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Specific Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application details returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get('bob_submitted_application_id'));",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_submitted_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_submitted_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Specific Application (Jane - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application details returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get('jane_submitted_application_id'));",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken2}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_submitted_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_submitted_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Test Bob Cannot See Jane's application",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Unathorized request\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.code).to.eql('UNAUTHORIZED_ACCESS');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_submitted_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_submitted_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get My Applications (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has pagination structure\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "    pm.expect(jsonData).to.have.property('page');",
                  "    pm.expect(jsonData.page).to.have.property('size');",
                  "    pm.expect(jsonData.page).to.have.property('totalElements');",
                  "});",
                  "",
                  "pm.test(\"Content is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.content).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/my-applications?page=0&size=10&sortBy=createdAt&sortDirection=DESC",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "my-applications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortDirection",
                  "value": "DESC"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Applications (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has pagination structure\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "    pm.expect(jsonData.page).to.have.property('totalElements');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications?page=0&size=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Applications for Pet (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All applications are for the same pet\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var petId = pm.environment.get('bob_application_pet_id');",
                  "    jsonData.content.forEach(function(app) {",
                  "        pm.expect(app.petId).to.eql(petId);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/pet/{{bob_application_pet_id}}?page=0&size=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "pet",
                "{{bob_application_pet_id}}"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Applications by Status (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All applications have SUBMITTED status\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    jsonData.content.forEach(function(app) {",
                  "        pm.expect(app.status).to.eql('SUBMITTED');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/status/SUBMITTED?page=0&size=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "status",
                "SUBMITTED"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Application Status - Approve Bob's application (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status updated to APPROVED\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('APPROVED');",
                  "});",
                  "",
                  "pm.test(\"Staff notes and reviewer added\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.staffNotes).to.not.be.null;",
                  "    pm.expect(jsonData.updatedBy).to.not.be.null;",
                  "    pm.expect(jsonData.updatedAt).to.not.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"APPROVED\",\n  \"staffNotes\": \"Great application! Applicant has excellent experience and suitable living conditions.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_submitted_application_id}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_submitted_application_id}}",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Application Status - Reject Jane's application (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status updated to REJECTED\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('REJECTED');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"REJECTED\",\n  \"staffNotes\": \"Living situation not suitable for this pet's needs.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_submitted_application_id}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_submitted_application_id}}",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Test User Cannot Update Submitted Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 Bad Request\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Error indicates invalid status\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.error).to.include('INVALID');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alternatePhone\": \"1111111111\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_submitted_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_submitted_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Test Bob Cannot Access Staff Endpoints (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 403 Forbidden\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Application Status - Jane's application to DRAFT (STAFF)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status updated to DRAFT\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('DRAFT');",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{staffToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"DRAFT\",\n  \"staffNotes\": \"Putting back to DRAFT, further documents needed.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_submitted_application_id}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_submitted_application_id}}",
                "status"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Application (Jane - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken2}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{jane_submitted_application_id}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{jane_submitted_application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get My Applications (Jane - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has pagination structure\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "    pm.expect(jsonData).to.have.property('page');",
                  "    pm.expect(jsonData.page).to.have.property('size');",
                  "    pm.expect(jsonData.page).to.have.property('totalElements');",
                  "});",
                  "",
                  "pm.test(\"Content is emtpy\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.content).to.be.empty;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken2}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/my-applications?page=0&size=10&sortBy=createdAt&sortDirection=DESC",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "my-applications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "sortDirection",
                  "value": "DESC"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Withdraw Application (Bob - USER)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Application status is WITHDRAWN\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('WITHDRAWN');",
                  "    pm.collectionVariables.set(\"bob_submitted_application_id\", jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Submitted timestamp is set\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.updatedAt).to.not.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{userToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/applications/{{bob_submitted_application_id}}/withdraw",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "applications",
                "{{bob_submitted_application_id}}",
                "withdraw"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "userToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "staffToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "draft_application_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "submitted_application_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "userToken2",
      "value": ""
    },
    {
      "key": "submitted_application_id2",
      "value": ""
    },
    {
      "key": "before_delete_application_count",
      "value": ""
    },
    {
      "key": "bob_draft_application_id",
      "value": ""
    },
    {
      "key": "jane_draft_application_id",
      "value": ""
    },
    {
      "key": "bob_submitted_application_id",
      "value": ""
    },
    {
      "key": "jane_submitted_application_id",
      "value": ""
    },
    {
      "key": "photo_to_be_deleted",
      "value": ""
    },
    {
      "key": "staff_created_pet_id",
      "value": ""
    },
    {
      "key": "bob_application_pet_id",
      "value": ""
    },
    {
      "key": "jane_application_pet_id",
      "value": ""
    }
  ]
}